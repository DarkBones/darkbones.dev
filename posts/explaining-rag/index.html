<!doctype html><html lang=en><head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content="DarkBones"><meta name=description content="How Retrieval-Augmented Generation (RAG) improves AI by letting models fetch real knowledge instead of relying on stale training data."><meta name=keywords content=",AI,Artificial Intelligence,Machine Learning,LLM,Retrieval-Augmented Generation,LLM Optimization"><meta name=robots content="noodp"><meta name=theme-color content><link rel=canonical href=https://darkbones.dev/posts/explaining-rag/><title>Beyond Training Data: How RAG Lets LLMs Retrieve, Not Guess :: DarkBones
</title><link rel=stylesheet href=/main.min.244183cde1a38e0b08f82c11791181288f9aac1cc9618cd6f4e9e7710c5768ba.css integrity="sha256-JEGDzeGjjgsI+CwReRGBKI+arBzJYYzW9OnncQxXaLo=" crossorigin=anonymous><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color><link rel="shortcut icon" href=/favicon.ico><meta name=msapplication-TileColor content><meta itemprop=name content="Beyond Training Data: How RAG Lets LLMs Retrieve, Not Guess"><meta itemprop=description content="How Retrieval-Augmented Generation (RAG) improves AI by letting models fetch real knowledge instead of relying on stale training data."><meta itemprop=datePublished content="2025-02-23T12:34:51+01:00"><meta itemprop=dateModified content="2025-02-23T12:34:51+01:00"><meta itemprop=wordCount content="1669"><meta itemprop=image content="https://darkbones.dev/posts/explaining-rag/cover-image.png"><meta itemprop=keywords content="Retrieval-Augmented Generation,RAG,LLM prompting,vector databases,AI knowledge retrieval"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://darkbones.dev/posts/explaining-rag/cover-image.png"><meta name=twitter:title content="Beyond Training Data: How RAG Lets LLMs Retrieve, Not Guess"><meta name=twitter:description content="How Retrieval-Augmented Generation (RAG) improves AI by letting models fetch real knowledge instead of relying on stale training data."><meta property="article:published_time" content="2025-02-23 12:34:51 +0100 +0100"></head><body><div class=container><header class=header><span class=header__inner><a href=/ style=text-decoration:none><div class=logo><span class=logo__mark>></span>
<span class=logo__text>hello</span>
<span class=logo__cursor></span></div></a><span class=header__right></span></span></header><div class=content><main class=post><div class=post-info><p><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
8 minutes</p></div><article><h1 class=post-title><a href=https://darkbones.dev/posts/explaining-rag/>Beyond Training Data: How RAG Lets LLMs Retrieve, Not Guess</a></h1><div class=post-excerpt>How Retrieval-Augmented Generation (RAG) improves AI by letting models fetch real knowledge instead of relying on stale training data.</div><div class=post-content><p><img src=cover-image.png alt="Retrieval-Augmented Generation"></p><p><strong>Large Language Models (LLMs) like GPT-4 don’t actually &lsquo;know&rsquo; anything, they predict words based on old training data. Retrieval-Augmented Generation (RAG) changes that by letting AI pull in fresh, real-world knowledge before answering.</strong></p><p><strong>RAG enhances LLMs by enabling them to retrieve relevant information from external sources before generating a response. Because LLMs rely on static training data and don’t update automatically, RAG gives them access to fresh, domain-specific, or private knowledge, without the need for costly retraining.</strong></p><blockquote><p><strong>Let&rsquo;s explore how <strong>RAG</strong> works, why it is useful, and how it differs from traditional LLM prompting.</strong></p></blockquote><h2 id=what-is-retrieval-augmented-generation-rag-in-ai>What is Retrieval-Augmented Generation (RAG) in AI?</h2><p>Retrieval-Augmented Generation (RAG) helps AI models retrieve external information before generating a response. But how exactly does this process work, and why is it important?</p><p>Large Language Models excel at many tasks. They can code, draft emails, hallucinate ingredients for the perfect sandwich, and even write articles, although I still prefer doing that myself. However, they have a <em>major limitation</em>. They lack real-time knowledge. Because training LLMs is a time-consuming process, they do not <em>&ldquo;know&rdquo;</em> about recent events. If you ask one about last week, it will either display a disclaimer, provide an outdated answer, or generate something completely inaccurate.</p><blockquote><p><strong>&ldquo;Some LLMs overcome their biggest limitation of stale training data by retrieving up-to-date information before responding.&rdquo;</strong></p></blockquote><p>RAG fetches relevant information before generating an answer, making AI responses more accurate and reducing hallucinations.</p><h2 id=rag-explained-in-simple-terms>RAG Explained in Simple Terms</h2><p>But how does <em>RAG</em> <strong>actually</strong> work? Instead of looking it up ourselves, let’s ask our favorite LLM:
<img src=1-rag-is-a-piece-of-cloth.png alt="Rag is a piece of cloth"></p><p>This is not quite what we were hoping for. No problem, we can ask <em>Bob</em> instead.
<img src=2-bob-rag.png alt="Asking Bob"></p><p>Surprisingly, Bob did not know the answer either, but he was able to retrieve it. Here is what happened:</p><ol><li>We asked Bob about <em>RAG</em>.</li><li>Bob went to the <em>library</em> and asked the <em>librarian</em> for information.</li><li>The <em>librarian</em> pointed him to the right aisle.</li><li>Bob <strong>retrieved</strong> the information.</li><li>Bob <strong>augmented</strong> his understanding by consuming the information before <strong>generating</strong> an answer.</li><li>Now Bob sounds like an expert. Thanks, Bob.</li></ol><p>This breakdown reveals that Bob is effectively functioning as a <em>RAG agent</em>.</p><p>With that insight, let’s explore exactly how a RAG agent operates.</p><h2 id=rag---simplified>RAG - Simplified</h2><p>Let&rsquo;s transform our interaction with Bob into an actual RAG system:</p><ul><li>Bob represents the <strong>RAG system</strong>.</li><li>The librarian acts as an <strong>embedder</strong>.</li><li>The library functions as a <strong>vector database</strong>.</li></ul><p><img src=4-rag-system.png alt="Rag System"></p><blockquote><p><strong>&ldquo;Rather than prompting an LLM directly, a <em>RAG system</em> acts as a knowledge bridge: retrieving, augmenting, and then generating responses.&rdquo;</strong></p></blockquote><h3 id=vectorizing-the-input>Vectorizing the Input</h3><p>The <em>RAG system</em> then forwards the prompt to the <em>embedder</em>, which converts it into a <em>vector</em>. This <em>vector</em> is a numeric representation of the prompt. The idea is that information with similar meaning will have similar vector representations.</p><blockquote><p><strong>&ldquo;Vectors unlock relevance. This <em>vector</em> allows the system to retrieve the most meaningful information from the <em>vector database</em>.&rdquo;</strong></p></blockquote><p>When the vector representation of the user&rsquo;s prompt is sent to the database, it retrieves the <em>most relevant matches</em>.</p><p>The <em>RAG system</em> then enhances the user&rsquo;s prompt by including the retrieved information:</p><pre tabindex=0><code>&lt;context&gt;
the information returned from the database
&lt;/context&gt;
&lt;user-prompt&gt;
the user&#39;s original prompt
&lt;/user-prompt&gt;
</code></pre><p>That is the entire process. <em>Retrieve</em>, <em>Augment</em>, and <em>Generate</em>. <strong>RAG</strong>.</p><h3 id=adding-to-the-knowledge-base>Adding to the Knowledge Base</h3><p>However, the system cannot retrieve information that has not been added to the database. How do we store new data? The process is straightforward. Instead of using the vector to find relevant information, the system stores the data along with its <em>vector representation</em>.</p><p><img src=3-rag-injest.png alt="Insert Knowledge"></p><p>If you were only interested in the big picture, congratulations. You now understand the core concept. However, if you&rsquo;re a fellow neckbeard, let&rsquo;s talk a bit more about vectors and embedders.</p><h2 id=what-is-a-vector>What is a Vector?</h2><p>In simple terms, a vector is a set of coordinates that describe how to move from A to B. Look at this graph:</p><p><img src=5-look-at-this-graph.jpg alt="Look at this Graph"></p><p>This graph has two dimensions. Each point, <strong>A</strong>, <strong>B</strong>, <strong>C</strong>, and <strong>D</strong>, can be described using a two-number coordinate system. The first number tells us how far to move to the right from the origin (0), while the second number tells us how far to move up. To reach <strong>A</strong>, the vector is <code>[3, 7]</code>. To reach <strong>D</strong>, the vector is <code>[3, 0]</code>.</p><h3 id=dimensionality-of-vectors>Dimensionality of Vectors</h3><p>The same principle applies in <em>three dimensions</em>. To move from your desk to the coffee machine, you must travel a certain distance along the <code>x</code>, <code>y</code>, and <code>z</code> axes, forming a <em>three-digit</em> coordinate system.</p><p><img src=6-3d-vector.png alt="3 Dimensions"></p><blockquote><p><strong>&ldquo;Humans struggle to visualize beyond three dimensions. Computers thrive in multi-dimensional spaces.&rdquo;</strong></p></blockquote><p>The math remains the same. Four dimensions? That requires a <em>four-digit</em> coordinate system. One hundred dimensions? That requires a <em>100-digit</em> coordinate system.</p><p><img src=this-is-fine.png alt="This is Fine"></p><blockquote><p><strong>&ldquo;The embedder I use operates in a mind-bending, 768-dimensional coordinate system, far beyond human perception.&rdquo;</strong></p></blockquote><p>When you have finished trying to visualize that, we can return to simpler, easy-to-draw, two-dimensional graphs.</p><h2 id=how-vector-embeddings-help-llms-retrieve-data>How Vector Embeddings Help LLMs Retrieve Data</h2><p>Vectors by themselves are simply <em>n-dimensional coordinates</em> that represent points in <em>n-dimensional space</em>.</p><blockquote><p><strong>&ldquo;Vectors aren’t just numbers, they encode meaning. Their true power lies in the information they represent.&rdquo;</strong></p></blockquote><p>In the same way, vectors are coordinates not to places, but to information. A specialized LLM, an <em>embedder</em>, is trained on a large corpus of text to figure out similarities and to place these pieces of information somewhere in <em>n-dimensional space</em> such that similar topics tend to be grouped together.</p><p>Like, when you go to a social event, you&rsquo;re likely to stick with your friends, colleagues, or at least a group of like-minded people.</p><h4 id=grouping-similar-concepts-together>Grouping Similar Concepts Together</h4><p><img src=7-word2vec.png alt=Word2Vec></p><p>This graph shows how words that are similar in meaning tend to get grouped together in this n-dimensional space. Modern embedders (like <strong>BERT</strong>) don&rsquo;t use single-word embeddings anymore, but generate <em>contextual embeddings</em>.</p><p>The ability to group similar concepts in vector space makes embeddings powerful. However, early embedding models like <em>Word2Vec</em> had a <em>significant limitation</em> that modern models have addressed.</p><h4 id=quick-tech-tangent>Quick Tech Tangent</h4><p>If you&rsquo;ve been working on AI systems for as long as I have, you might be familiar with <strong>Word2Vec</strong>. While groundbreaking when it came out in 2013, it has a major flaw: it assigns a <strong>single vector</strong> to each word, no matter the context.</p><p>Take the word <em>&ldquo;bat&rdquo;</em>.</p><ul><li>Are we talking about the <strong>flying mammal</strong>? Then it should be near <em>&ldquo;mammal&rdquo;</em>, <em>&ldquo;cave&rdquo;</em>, and <em>&ldquo;nocturnal&rdquo;</em>.</li><li>Or do we mean a <strong>baseball bat</strong>? Then it belongs near <em>&ldquo;ball&rdquo;</em>, <em>&ldquo;pitch&rdquo;</em>, and <em>&ldquo;base&rdquo;</em> (but what <em>base</em>? Military?)</li><li>And what if we&rsquo;re in the world of <strong>fiction</strong>? Then <em>&ldquo;bat&rdquo;</em> relates to <em>&ldquo;vampire&rdquo;</em> and <em>&ldquo;transformation&rdquo;</em>.</li></ul><p><strong>Word2Vec</strong> can&rsquo;t tell the difference. It picks one and sticks with it.</p><p>One thing I find particularly fascinating with Word2Vec is that, since words are now represented by numbers, you can actually do arithmetic on them.</p><p>You can make equations like</p><blockquote><p><strong>"<code>king - man + woman = queen</code> - a legendary example of how AI models map relationships in vector space."</strong></p></blockquote><p>It&rsquo;s wild, but it works (most of the time).</p><p><strong>Tangent over.</strong></p><h3 id=how-are-vectors-used>How are Vectors Used?</h3><p>Now that we understand vectors, the next step is straightforward. We embed the information we want the LLM to access, and when we ask a question about that information, <strong>the question itself should be close to the relevant content in vector space</strong>. The vector database retrieves the <code>n</code> most relevant pieces of content, where <code>n</code> is a configurable number.</p><p><em>It also returns the <em>cosine similarity</em> score for each result, indicating how closely the retrieved content matches the query.</em></p><h4 id=cosine-similarity>Cosine Similarity</h4><blockquote><p><strong>&ldquo;Cosine similarity doesn’t just compare numbers, it measures <em>meaning</em> by calculating the angle between two vectors.&rdquo;</strong></p></blockquote><p>A smaller angle indicates greater similarity, meaning the retrieved data is more relevant to the prompt.</p><p><img src=8-cosine-similarity.png alt="Cosine Similarity"></p><p>In our example, <em>A</em> and <em>B</em> represent the phrases <em>&ldquo;RAG stands for Retrieval Augmented Generation&rdquo;</em> and <em>&ldquo;Hey LLM, tell me about RAG&rdquo;</em>. Since they are closely related, their vectors are similar. If we instead ask <em>&ldquo;Describe an Eclipse&rdquo;</em>, its vector will be far from the others, making it unrelated. However, if <em>&ldquo;RAG stands for Retrieval Augmented Generation&rdquo;</em> is the only entry in the database, <strong>it will still be retrieved</strong>, even if it is not relevant to the query.</p><h2 id=limitations-of-rag>Limitations of RAG</h2><p>Typically, we do not store and retrieve entire documents in the vector database. If we did, a single large document could easily exceed the context window of the LLM. If the system is configured to return the ten most relevant pieces of information, and each of them is the size of a full article, your computer quickly turns into a space heater. To prevent this, we split the information into chunks of a predefined size, such as <code>1000</code> characters, and we try to keep the sentences and paragraphs intact.</p><p>However, splitting information into chunks introduces a new problem. Just as <em>Word2Vec</em> struggles to determine meaning from a single word, RAG often fails to understand the full context of a single chunk, especially when that chunk is extracted from the middle of a document.</p><p><img src=9-over-rag.png alt=Rag-time></p><p>Here is a problem I encountered recently. I keep a detailed work diary where I document all my professional achievements. It is extremely useful during performance reviews. However, when I ask my RAG system what I achieved at my current company, it confidently includes accomplishments from my previous jobs. Because I write this diary in the first person and also include information from other sources written in the first person, the system cannot distinguish between them. As a result, it starts attributing achievements to me that I had nothing to do with. That is how I realized something was wrong. My system was suddenly telling me about all the interesting things I supposedly did away from the computer, which is impossible since I never leave my desk.</p><h2 id=conclusion>Conclusion</h2><p>RAG makes LLMs more useful by letting them retrieve information they wouldn’t otherwise have access to. But it’s not magic. It comes with its own challenges, from handling context properly to avoiding irrelevant results.</p><p>But as I learned firsthand, fetching information isn’t the same as understanding it. That’s why making RAG systems <strong>context-aware</strong> is the next big challenge, one I’ll tackle in my next article.</p></div></article><hr><div class=post-info><p><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg>
<span class=tag><a href=https://darkbones.dev/tags/ai/>AI</a></span>
<span class=tag><a href=https://darkbones.dev/tags/artificial-intelligence/>Artificial Intelligence</a></span>
<span class=tag><a href=https://darkbones.dev/tags/machine-learning/>Machine Learning</a></span>
<span class=tag><a href=https://darkbones.dev/tags/llm/>LLM</a></span>
<span class=tag><a href=https://darkbones.dev/tags/retrieval-augmented-generation/>Retrieval-Augmented Generation</a></span>
<span class=tag><a href=https://darkbones.dev/tags/llm-optimization/>LLM Optimization</a></span></p><p><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>
1669 Words</p><p><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
2025-02-23 11:34</p></div><div class=pagination><div class=pagination__buttons><span class="button previous"><a href=https://darkbones.dev/posts/rag-but-i-made-it-smarter/><span class=button__icon>←</span>
<span class=button__text>RAG, But I Made it Smarter</span>
</a></span><span class="button next"><a href=https://darkbones.dev/posts/one-foot-in-the-unknown/><span class=button__text>One Foot in the Unknown</span>
<span class=button__icon>→</span></a></span></div></div></main></div><footer class=footer></footer></div><script type=text/javascript src=/bundle.min.e89fda0f29b95d33f6f4224dd9e5cf69d84aff3818be2b0d73e731689cc374261b016d17d46f8381962fb4a1577ba3017b1f23509d894f6e66431f988c00889e.js integrity="sha512-6J/aDym5XTP29CJN2eXPadhK/zgYvisNc+cxaJzDdCYbAW0X1G+DgZYvtKFXe6MBex8jUJ2JT25mQx+YjACIng=="></script></body></html>